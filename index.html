<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
	  
	  
	  <style>
        table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}
        td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}
    </style>
    
  </head>
  <body>
    
      <div>
         		 <table id="list">
            <tr>
            <th>Title</th><th>Price</th>
            </tr> 
          </table>
      </div>
	<script>
    function hi()
        {
            fetch('https://s3.amazonaws.com/open-to-cors/assignment.json').then((response)=>{
             return response.json();
            }).then((res)=>{
                
                
                //str[0]='[';
                //str[str.length]=']';
                var li= document.getElementById('list');
                var list=[];
                var s=Object.keys(res['products'])
                for (i=0;i<s.length;i++)
                {
                    list.push(res['products'][s[i]]);
                }
                list.sort(function(a,b){
                    return b.popularity-a.popularity;
                });
                list.forEach((item)=>{
                     li.innerHTML+='<tr><td>'+item.title+'</td><td>'+item.price+'</td></tr>';
                });
                console.log(list);
                //console.log(JSON.parse(str));
            }).catch((err)=>{console.error(err);});
        }
        hi();
    </script>
  </body>
</html>
